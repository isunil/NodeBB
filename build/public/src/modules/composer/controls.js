"use strict";define("composer/controls",["composer/preview"],function(e){var t={};t.insertIntoTextarea=function(t,n){var r={context:this,textarea:t,value:n,preventDefault:false};$(window).trigger("action:composer.insertIntoTextarea",r);if(r.preventDefault){return}var a=$(r.textarea);var i=a.val();var l=a.parents('[component="composer"]');a.val(i.slice(0,r.textarea.selectionStart)+r.value+i.slice(r.textarea.selectionStart));e.render(l)};t.wrapSelectionInTextareaWith=function(e,t,n){if(n===undefined){n=t}var r=$(e);var a=r.val();var i=/^(\s*)([\s\S]*?)(\s*)$/.exec(a.slice(e.selectionStart,e.selectionEnd));if(!i[2]){i=[null,"",a.slice(e.selectionStart,e.selectionEnd),""]}r.val(a.slice(0,e.selectionStart)+i[1]+t+i[2]+n+i[3]+a.slice(e.selectionEnd));return[i[1].length,i[3].length]};t.updateTextareaSelection=function(e,t,n){var r={context:this,textarea:e,start:t,end:n,preventDefault:false};$(window).trigger("action:composer.updateTextareaSelection",r);if(r.preventDefault){return}e.setSelectionRange(r.start,r.end);$(r.textarea).focus()};t.getBlockData=function(e,t,n){var r=e.value;t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var a=new RegExp(t,"g");var i;var l=[];var c;r=r.split("\n").reduce(function(e,t){if(e!==null){return e}e=n<=t.length?t:null;if(e===null){n=n-(t.length+1)}return e},null);while((i=a.exec(r))!==null){l.push(i.index)}c={in:!!(l.reduce(function(e,t){if(n>=t+2){e+=1}return e},0)%2),atEnd:l.reduce(function(e,t){if(e){return e}return n===t},false)};c.atEnd=c.in?c.atEnd:false;return c};return t});
//# sourceMappingURL=controls.js.map