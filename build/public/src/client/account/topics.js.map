{"version":3,"sources":["public/src/client/account/topics.js"],"names":["define","header","infinitescroll","AccountTopics","method","template","set","init","handleInfiniteScroll","_method","_template","_set","config","usePagination","loadMore","direction","uid","ajaxify","data","theirid","after","$","attr","count","topicsPerPage","done","topics","length","onTopicsLoaded","nextStart","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","utils","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,uBAAwB,wBAAyB,SAAUC,EAAQC,GAClG,IAAIC,KACJ,IAAIC,EACJ,IAAIC,EACJ,IAAIC,EAEJH,EAAcI,KAAO,WACpBN,EAAOM,OAEPJ,EAAcK,qBAAqB,4BAA6B,mBAGjEL,EAAcK,qBAAuB,SAAUC,EAASC,EAAWC,GAClEP,EAASK,EACTJ,EAAWK,EACXJ,EAAMK,EAEN,IAAKC,OAAOC,cAAe,CAC1BX,EAAeK,KAAKO,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAGDb,EAAeY,SAASV,GACvBE,IAAKA,EACLU,IAAKC,QAAQC,KAAKC,QAClBC,MAAOC,EAAE,0BAA0BC,KAAK,kBACxCC,MAAOX,OAAOY,eACZ,SAAUN,EAAMO,GAClB,GAAIP,EAAKQ,QAAUR,EAAKQ,OAAOC,OAAQ,CACtCC,EAAeV,EAAKQ,OAAQD,OACtB,CACNA,IAGDJ,EAAE,0BAA0BC,KAAK,iBAAkBJ,EAAKW,aAI1D,SAASD,EAAeF,EAAQI,GAC/BC,IAAIC,kBAAkB3B,EAAU,UAAYqB,OAAQA,GAAU,SAAUO,GACvEZ,EAAE,0BAA0Ba,OAAOD,GACnCA,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJC,MAAMC,yBAAyBN,EAAKE,KAAK,2BACzCd,EAAEmB,QAAQC,QAAQ,wBAA0Bf,OAAQA,IACpDI,MAIF,OAAO3B","file":"public/src/client/account/topics.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/account/topics', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\r\n\tvar AccountTopics = {};\r\n\tvar method;\r\n\tvar template;\r\n\tvar set;\r\n\r\n\tAccountTopics.init = function () {\r\n\t\theader.init();\r\n\r\n\t\tAccountTopics.handleInfiniteScroll('topics.loadMoreUserTopics', 'account/topics');\r\n\t};\r\n\r\n\tAccountTopics.handleInfiniteScroll = function (_method, _template, _set) {\r\n\t\tmethod = _method;\r\n\t\ttemplate = _template;\r\n\t\tset = _set;\r\n\r\n\t\tif (!config.usePagination) {\r\n\t\t\tinfinitescroll.init(loadMore);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction loadMore(direction) {\r\n\t\tif (direction < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinfinitescroll.loadMore(method, {\r\n\t\t\tset: set,\r\n\t\t\tuid: ajaxify.data.theirid,\r\n\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\r\n\t\t\tcount: config.topicsPerPage,\r\n\t\t}, function (data, done) {\r\n\t\t\tif (data.topics && data.topics.length) {\r\n\t\t\t\tonTopicsLoaded(data.topics, done);\r\n\t\t\t} else {\r\n\t\t\t\tdone();\r\n\t\t\t}\r\n\r\n\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onTopicsLoaded(topics, callback) {\r\n\t\tapp.parseAndTranslate(template, 'topics', { topics: topics }, function (html) {\r\n\t\t\t$('[component=\"category\"]').append(html);\r\n\t\t\thtml.find('.timeago').timeago();\r\n\t\t\tapp.createUserTooltips();\r\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\r\n\t\t\t$(window).trigger('action:topics.loaded', { topics: topics });\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\r\n\treturn AccountTopics;\r\n});\r\n"]}