!function(t){"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd&&define(t)}(function(){function o(t,r,n,i,e){var s=t.__escape;return'<div component="composer" class="composer'+(n(r&&r.resizable)?" resizable":"")+(n(r&&r.isTopicOrMain)?"":" reply")+'"'+(n(r&&r.disabled)?"":' style="visibility: inherit;"')+'>\r\n\r\n\t<div class="composer-container">\r\n\t\t<form id="compose-form" method="post">\r\n\t\t\t'+(n(r&&r.pid)?'\r\n\t\t\t<input type="hidden" name="pid" value="'+s(n(r&&r.pid))+'" />\r\n\t\t\t<input type="hidden" name="thumb" value="'+s(n(r&&r.thumb))+'" />\r\n\t\t\t':"")+"\r\n\t\t\t"+(n(r&&r.tid)?'\r\n\t\t\t<input type="hidden" name="tid" value="'+s(n(r&&r.tid))+'" />\r\n\t\t\t':"")+"\r\n\t\t\t"+(n(r&&r.cid)?'\r\n\t\t\t<input type="hidden" name="cid" value="'+s(n(r&&r.cid))+'" />\r\n\t\t\t':"")+'\r\n\t\t\t<input type="hidden" name="_csrf" value="'+s(n(r&&r.config&&r.config.csrf_token))+'" />\r\n\t\t</form>\r\n\r\n\t\t<div class="title-container row">\r\n\t\t\t'+(n(r&&r.showHandleInput)?'\r\n\t\t\t<div class="col-sm-3 col-md-12">\r\n\t\t\t\t<input class="handle form-control" type="text" tabindex="1" placeholder="[[topic:composer.handle_placeholder]]" value="'+s(n(r&&r.handle))+'" />\r\n\t\t\t</div>\r\n\t\t\t':"")+'\r\n\t\t\t<div class="'+(n(r&&r.isTopic)?"col-lg-9":"col-lg-12")+' col-md-12">\r\n\t\t\t\t'+(n(r&&r.isTopicOrMain)?'\r\n\t\t\t\t<input name="title" form="compose-form" class="title form-control" type="text" tabindex="1" placeholder="[[topic:composer.title_placeholder]]" value="'+s(n(r&&r.topicTitle))+'"/>\r\n\t\t\t\t':'\r\n\t\t\t\t<span class="title">[[topic:composer.replying_to, "'+s(n(r&&r.topicTitle))+'"]]</span>\r\n\t\t\t\t')+'\r\n\t\t\t\t<ul class="dropdown-menu quick-search-results hidden">\r\n\t\t\t\t\t'+o.blocks.posts(t,r,n,i,e)+"\r\n"+(n(r&&r.multiplePages)?'\r\n<li class="text-center">\r\n\t<a href="'+s(n(r&&r.url))+'">\r\n\t\t[[search:see-more-results, '+s(n(r&&r.matchCount))+"]]\r\n\t</a>\r\n</li>\r\n":"")+"\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t"+(n(r&&r.isTopic)?'\r\n\t\t\t<div class="category-list-container col-lg-3 col-md-3"></div>\r\n\t\t\t':"")+'\r\n\t\t</div>\r\n\r\n\t\t<div class="category-tag-row">\r\n\t\t\t<div class="btn-toolbar formatting-bar">\r\n\t\t\t\t<ul class="formatting-group">\r\n\t\t\t\t\t'+o.blocks.formatting(t,r,n,i,e)+"\r\n\r\n\t\t\t\t\t\x3c!--[if gte IE 9]>\x3c!--\x3e\r\n\t\t\t\t\t\t"+(n(r&&r.privileges&&r.privileges["upload:post:image"])?'\r\n\t\t\t\t\t\t<li class="img-upload-btn hide" data-format="picture" tabindex="-1">\r\n\t\t\t\t\t\t\t<i class="fa fa-file-image-o"></i>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t':"")+"\r\n\t\t\t\t\t\t"+(n(r&&r.privileges&&r.privileges["upload:post:file"])?'\r\n\t\t\t\t\t\t<li class="file-upload-btn hide" data-format="upload" tabindex="-1">\r\n\t\t\t\t\t\t\t<span class="fa-stack">\r\n\t\t\t\t\t\t\t\t<i class="fa fa-file-o fa-stack-1x"></i>\r\n\t\t\t\t\t\t\t\t<i class="fa fa-arrow-up fa-stack-1x"></i>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t':"")+"\r\n\t\t\t\t\t\x3c!--<![endif]--\x3e\r\n\r\n\t\t\t\t\t"+(n(r&&r.allowTopicsThumbnail)?'\r\n\t\t\t\t\t<li tabindex="-1">\r\n\t\t\t\t\t\t<i class="fa fa-th-large topic-thumb-btn topic-thumb-toggle-btn hide" title="[[topic:composer.thumb_title]]"></i>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<div class="topic-thumb-container center-block hide">\r\n\t\t\t\t\t\t<form id="thumbForm" method="post" class="topic-thumb-form form-inline" enctype="multipart/form-data">\r\n\t\t\t\t\t\t\t<img class="topic-thumb-preview"></img>\r\n\t\t\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t\t\t<label for="topic-thumb-url">[[topic:composer.thumb_url_label]]</label>\r\n\t\t\t\t\t\t\t\t<input type="text" id="topic-thumb-url" class="form-control" placeholder="[[topic:composer.thumb_url_placeholder]]" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t\t\t<label for="topic-thumb-file">[[topic:composer.thumb_file_label]]</label>\r\n\t\t\t\t\t\t\t\t<input type="file" id="topic-thumb-file" class="form-control" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="form-group topic-thumb-ctrl">\r\n\t\t\t\t\t\t\t\t<i class="fa fa-spinner fa-spin hide topic-thumb-spinner" title="[[topic:composer.uploading]]"></i>\r\n\t\t\t\t\t\t\t\t<i class="fa fa-times topic-thumb-btn hide topic-thumb-clear-btn" title="[[topic:composer.thumb_remove]]"></i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t':"")+'\r\n\r\n\t\t\t\t\t<form id="fileForm" method="post" enctype="multipart/form-data">\r\n\t\t\t\t\t\t\x3c!--[if gte IE 9]>\x3c!--\x3e\r\n\t\t\t\t\t\t\t<input type="file" id="files" name="files[]" multiple class="gte-ie9 hide"/>\r\n\t\t\t\t\t\t\x3c!--<![endif]--\x3e\r\n\t\t\t\t\t\t\x3c!--[if lt IE 9]>\r\n\t\t\t\t\t\t\t<input type="file" id="files" name="files[]" class="lt-ie9 hide" value="Upload"/>\r\n\t\t\t\t\t\t<![endif]--\x3e\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</ul>\r\n\r\n\t\t\t\t<div class="btn-group pull-right action-bar">\r\n\t\t\t\t\t<a href="'+s(n(r&&r.discardRoute))+'" class="btn btn-default composer-discard" data-action="discard" tabindex="-1"><i class="fa fa-times"></i> [[topic:composer.discard]]</a>\r\n\r\n\t\t\t\t\t<button type="submit" form="compose-form" class="btn btn-primary composer-submit" data-action="post" tabindex="6"><i class="fa fa-check"></i> [[topic:composer.submit]]</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row write-preview-container">\r\n\t\t\t<div class="col-md-6 col-sm-12 write-container">\r\n\t\t\t\t<div class="help-text">\r\n\t\t\t\t\t[[modules:composer.compose]] <span class="help hidden"><i class="fa fa-question-circle"></i></span>\r\n\t\t\t\t\t<span class="toggle-preview hide">[[modules:composer.show_preview]]</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<textarea name="content" form="compose-form" class="write" tabindex="5"></textarea>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-6 hidden-sm hidden-xs preview-container">\r\n\t\t\t\t<div class="help-text">\r\n\t\t\t\t\t<span class="toggle-preview">[[modules:composer.hide_preview]]</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="preview well"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t'+(n(r&&r.isTopicOrMain)?'\r\n\t\t<div class="tag-row">\r\n\t\t\t<div class="tags-container">\r\n\t\t\t\t<div class="btn-group dropup '+(n(r&&r.tagWhitelist&&r.tagWhitelist.length)?"":"hidden")+'" component="composer/tag/dropdown">\r\n\t\t\t\t\t<button class="btn btn-default dropdown-toggle" data-toggle="dropdown" type="button">\r\n\t\t\t\t\t\t<span class="visible-sm-inline visible-md-inline visible-lg-inline"><i class="fa fa-tags"></i></span>\r\n\t\t\t\t\t\t<span class="caret"></span>\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<ul class="dropdown-menu">\r\n\t\t\t\t\t\t'+o.blocks.tagWhitelist(t,r,n,i,e)+'\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input class="tags" type="text" class="form-control" placeholder="[[tags:enter_tags_here, '+s(n(r&&r.minimumTagLength))+", "+s(n(r&&r.maximumTagLength))+']]" tabindex="5"/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t':"")+"\r\n\r\n\r\n\t</div>\r\n</div>\r\n"}return o.blocks={posts:function(i,e,s,t,o){var a=i.__escape;return t(s(e&&e.posts),function(t,r,n){return'\r\n<li>\r\n\t<a href="'+a(s(e&&e.config&&e.config.relative_path))+"/post/"+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].pid))+'">\r\n\t\t'+a(o(e,i,"buildAvatar",[s(e&&e.posts&&e.posts[t]&&e.posts[t].user),"sm",s(e&&e.true)]))+'\r\n\t\t<span class="quick-search-title">'+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].topic&&e.posts[t].topic.title))+'</span>\r\n\t\t<br/>\r\n\t\t<p class="snippet">\r\n\t\t'+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].snippet))+'\r\n\t\t</p>\r\n\t\t<small class="post-info pull-right">\r\n\t\t\t<span class="fa-stack" style="'+a(o(e,i,"generateCategoryBackground",[s(e&&e.posts&&e.posts[t]&&e.posts[t].category)]))+'"><i style="color:'+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].category&&e.posts[t].category.color))+';" class="fa '+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].category&&e.posts[t].category.icon))+' fa-stack-1x"></i></span> '+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].category&&e.posts[t].category.name))+' &bull;\r\n\t\t\t<span class="timeago" title="'+a(s(e&&e.posts&&e.posts[t]&&e.posts[t].timestampISO))+'"></span>\r\n\t\t</small>\r\n\t </a>\r\n</li>\r\n'+(r===n-1?"":'\r\n<li role="separator" class="divider"></li>\r\n')+"\r\n"},function(){return""})},formatting:function(t,r,n,i){var e=t.__escape;return i(n(r&&r.formatting),function(t){return"\r\n\t\t\t\t\t\t"+(n(r&&r.formatting&&r.formatting[t]&&r.formatting[t].spacer)?'\r\n\t\t\t\t\t\t<li class="spacer"></li>\r\n\t\t\t\t\t\t':"\r\n\t\t\t\t\t\t"+(n(r&&r.formatting&&r.formatting[t]&&r.formatting[t].mobile)?"":'\r\n\t\t\t\t\t\t<li tabindex="-1" data-format="'+e(n(r&&r.formatting&&r.formatting[t]&&r.formatting[t].name))+'"><i class="'+e(n(r&&r.formatting&&r.formatting[t]&&r.formatting[t].className))+'"></i></li>\r\n\t\t\t\t\t\t')+"\r\n\t\t\t\t\t\t")+"\r\n\t\t\t\t\t"},function(){return""})},tagWhitelist:function(t,r,e,n){var s=t.__escape;return n(e(r&&r.tagWhitelist),function(t,r,n,i){return'\r\n\t\t\t\t\t\t<li data-tag="'+s(e(i))+'"><a href="#">'+s(e(i))+"</a></li>\r\n\t\t\t\t\t\t"},function(){return""})}},o});