!function(o){"object"==typeof module&&module.exports?module.exports=o():"function"==typeof define&&define.amd&&define(o)}(function(){function e(o,r,s,t,n){o.__escape;return s(r&&r.rooms&&r.rooms.length)?"\r\n"+e.blocks.rooms(o,r,s,t,n)+"\r\n":'\r\n<li class="no_active"><a href="#">[[modules:chat.no_active]]</a></li>\r\n'}return e.blocks={rooms:function(t,n,e,o,m){var a=t.__escape;return o(e(n&&n.rooms),function(s){return'\r\n<li class="'+(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].unread)?"unread":"")+'" data-roomid="'+a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].roomId))+'">\r\n\t<strong class="room-name">\r\n\t\t'+(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].lastUser&&n.rooms[s].lastUser.uid)?"\r\n\t\t"+(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].roomName)?a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].roomName)):a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].usernames)))+"\r\n\t\t":"\r\n\t\t<span>[[modules:chat.no-users-in-room]]</span>\r\n\t\t")+'\r\n\t</strong>\r\n\t<div class="avatar-placeholder"></div>\r\n\t'+o(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].users),function(o,r){return"\r\n\t"+(0===r?'\r\n\t<div class="main-avatar">\r\n\t\t<a href="'+a(e(n&&n.config&&n.config.relative_path))+"/user/"+a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].users&&n.rooms[s].users[o]&&n.rooms[s].users[o].userslug))+'">'+a(m(n,t,"buildAvatar",[e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].users&&n.rooms[s].users[o]),"sm",e(n&&n.true)]))+"</a>\r\n\t</div>\r\n\t":"")+"\r\n\t"},function(){return""})+'\r\n\r\n\t<ul class="members">\r\n\t\t'+o(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].users),function(o){return'\r\n\t\t<li>\r\n\t\t\t<a href="'+a(e(n&&n.config&&n.config.relative_path))+"/user/"+a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].users&&n.rooms[s].users[o]&&n.rooms[s].users[o].userslug))+'">'+a(m(n,t,"buildAvatar",[e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].users&&n.rooms[s].users[o]),"sm",e(n&&n.true)]))+"</a>\r\n\t\t</li>\r\n\t\t"},function(){return""})+'\r\n\t</ul>\r\n\r\n\t<span class="teaser-content">'+a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].teaser&&n.rooms[s].teaser.content))+'</span>\r\n\t<span class="teaser-timestamp timeago pull-right" title="'+a(e(n&&n.rooms&&n.rooms[s]&&n.rooms[s].teaser&&n.rooms[s].teaser.timestampISO))+'"></span>\r\n</li>\r\n'},function(){return""})}},e});